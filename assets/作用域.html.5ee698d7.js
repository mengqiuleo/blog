import{_ as n,o as a,c as s,a as e}from"./app.988effc2.js";const t={},o=e(`<h2 id="\u5199\u5728\u524D\u9762" tabindex="-1"><a class="header-anchor" href="#\u5199\u5728\u524D\u9762" aria-hidden="true">#</a> \u5199\u5728\u524D\u9762</h2><p>\u8FD9\u91CC\u662F\u5C0F\u98DE\u4FA0Pan\u{1F973}\uFF0C\u7ACB\u5FD7\u6210\u4E3A\u4E00\u540D\u4F18\u79C0\u7684\u524D\u7AEF\u7A0B\u5E8F\u5A9B\uFF01\uFF01\uFF01</p><p>\u672C\u7BC7\u6587\u7AE0\u6536\u5F55\u4E8E\u6211\u7684\u4E13\u680F\uFF1A<a href="https://blog.csdn.net/weixin_52834435/category_11886356.html?spm=1001.2014.3001.5482" target="_blank" rel="noopener noreferrer">\u524D\u7AEF\u7CBE\u8FDB\u4E4B\u8DEF</a></p><p>\u540C\u65F6\u6536\u5F55\u4E8E\u6211\u7684<a href="https://github.com/mengqiuleo" target="_blank" rel="noopener noreferrer">github</a>\u524D\u7AEF\u7B14\u8BB0\u4ED3\u5E93\u4E2D\uFF0C\u6301\u7EED\u66F4\u65B0\u4E2D\uFF0C\u6B22\u8FCEstar~</p><p>\u{1F449}<a href="https://github.com/mengqiuleo/myNote" target="_blank" rel="noopener noreferrer">https://github.com/mengqiuleo/myNote</a></p><hr><h2 id="\u4F5C\u7528\u57DF-scope" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528\u57DF-scope" aria-hidden="true">#</a> \u4F5C\u7528\u57DF(Scope)</h2><h3 id="_1-\u4EC0\u4E48\u662F\u4F5C\u7528\u57DF" tabindex="-1"><a class="header-anchor" href="#_1-\u4EC0\u4E48\u662F\u4F5C\u7528\u57DF" aria-hidden="true">#</a> 1.\u4EC0\u4E48\u662F\u4F5C\u7528\u57DF</h3><blockquote><p>\u4F5C\u7528\u57DF\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u53D8\u91CF\u7ED1\u5B9A\u7684\u6709\u6548\u8303\u56F4\u3002\u5C31\u662F\u8BF4\u5728\u8FD9\u4E2A\u4F5C\u7528\u57DF\u4E2D\uFF0C\u8FD9\u4E2A<strong>\u53D8\u91CF\u7ED1\u5B9A</strong>\u662F\u6709\u6548\u7684\uFF0C\u51FA\u4E86\u8FD9\u4E2A\u4F5C\u7528\u57DF<strong>\u53D8\u91CF\u7ED1\u5B9A</strong>\u5C31\u65E0\u6548\u4E86\u3002</p></blockquote><p><strong>\u4F5C\u7528\u57DF\u5C31\u662F\u4E00\u4E2A\u72EC\u7ACB\u7684\u5730\u76D8\uFF0C\u8BA9\u53D8\u91CF\u4E0D\u4F1A\u5916\u6CC4\u3001\u66B4\u9732\u51FA\u53BB</strong>\u3002\u4E5F\u5C31\u662F\u8BF4<strong>\u4F5C\u7528\u57DF\u6700\u5927\u7684\u7528\u5904\u5C31\u662F\u9694\u79BB\u53D8\u91CF\uFF0C\u4E0D\u540C\u4F5C\u7528\u57DF\u4E0B\u540C\u540D\u53D8\u91CF\u4E0D\u4F1A\u6709\u51B2\u7A81\u3002</strong></p><p><strong>ES6 \u4E4B\u524D JavaScript \u6CA1\u6709\u5757\u7EA7\u4F5C\u7528\u57DF,\u53EA\u6709\u5168\u5C40\u4F5C\u7528\u57DF\u548C\u51FD\u6570\u4F5C\u7528\u57DF</strong>\u3002ES6\u7684\u5230\u6765\uFF0C\u4E3A\u6211\u4EEC\u63D0\u4F9B\u4E86\u2018\u5757\u7EA7\u4F5C\u7528\u57DF\u2019,\u53EF\u901A\u8FC7\u65B0\u589E\u547D\u4EE4let\u548Cconst\u6765\u4F53\u73B0\u3002</p><h3 id="_2-\u5168\u5C40\u4F5C\u7528\u57DF\u548C\u51FD\u6570\u4F5C\u7528\u57DF" tabindex="-1"><a class="header-anchor" href="#_2-\u5168\u5C40\u4F5C\u7528\u57DF\u548C\u51FD\u6570\u4F5C\u7528\u57DF" aria-hidden="true">#</a> 2.\u5168\u5C40\u4F5C\u7528\u57DF\u548C\u51FD\u6570\u4F5C\u7528\u57DF</h3><ul><li><p>\u6700\u5916\u5C42\u51FD\u6570 \u548C\u5728\u6700\u5916\u5C42\u51FD\u6570\u5916\u9762\u5B9A\u4E49\u7684\u53D8\u91CF\u62E5\u6709\u5168\u5C40\u4F5C\u7528\u57DF</p></li><li><p>\u6240\u6709\u672B\u5B9A\u4E49\u76F4\u63A5\u8D4B\u503C\u7684\u53D8\u91CF\u81EA\u52A8\u58F0\u660E\u4E3A\u62E5\u6709\u5168\u5C40\u4F5C\u7528\u57DF</p></li><li><p>\u6240\u6709window\u5BF9\u8C61\u7684\u5C5E\u6027\u62E5\u6709\u5168\u5C40\u4F5C\u7528\u57DF</p></li></ul><p>\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0Cwindow\u5BF9\u8C61\u7684\u5185\u7F6E\u5C5E\u6027\u90FD\u62E5\u6709\u5168\u5C40\u4F5C\u7528\u57DF\uFF0C\u4F8B\u5982window.name\u3001window.location\u3001window.top\u7B49\u7B49\u3002</p><p>\u5168\u5C40\u4F5C\u7528\u57DF\u6709\u4E2A\u5F0A\u7AEF\uFF1A\u5982\u679C\u6211\u4EEC\u5199\u4E86\u5F88\u591A\u884C JS \u4EE3\u7801\uFF0C\u53D8\u91CF\u5B9A\u4E49\u90FD\u6CA1\u6709\u7528\u51FD\u6570\u5305\u62EC\uFF0C\u90A3\u4E48\u5B83\u4EEC\u5C31\u5168\u90E8\u90FD\u5728\u5168\u5C40\u4F5C\u7528\u57DF\u4E2D\u3002\u8FD9\u6837\u5C31\u4F1A \u6C61\u67D3\u5168\u5C40\u547D\u540D\u7A7A\u95F4, \u5BB9\u6613\u5F15\u8D77\u547D\u540D\u51B2\u7A81\u3002</p><p>\u51FD\u6570\u4F5C\u7528\u57DF,\u662F\u6307\u58F0\u660E\u5728\u51FD\u6570\u5185\u90E8\u7684\u53D8\u91CF\uFF0C\u548C\u5168\u5C40\u4F5C\u7528\u57DF\u76F8\u53CD\uFF0C\u5C40\u90E8\u4F5C\u7528\u57DF\u4E00\u822C\u53EA\u5728\u56FA\u5B9A\u7684\u4EE3\u7801\u7247\u6BB5\u5185\u53EF\u8BBF\u95EE\u5230\uFF0C\u6700\u5E38\u89C1\u7684\u4F8B\u5982\u51FD\u6570\u5185\u90E8\u3002</p><h3 id="_3-\u5757\u7EA7\u4F5C\u7528\u57DF" tabindex="-1"><a class="header-anchor" href="#_3-\u5757\u7EA7\u4F5C\u7528\u57DF" aria-hidden="true">#</a> 3.\u5757\u7EA7\u4F5C\u7528\u57DF</h3><p>\u5757\u7EA7\u4F5C\u7528\u57DF\u53EF\u901A\u8FC7\u65B0\u589E\u547D\u4EE4let\u548Cconst\u58F0\u660E\uFF0C\u6240\u58F0\u660E\u7684\u53D8\u91CF\u5728\u6307\u5B9A\u5757\u7684\u4F5C\u7528\u57DF\u5916\u65E0\u6CD5\u88AB\u8BBF\u95EE\u3002\u5757\u7EA7\u4F5C\u7528\u57DF\u5728\u5982\u4E0B\u60C5\u51B5\u88AB\u521B\u5EFA\uFF1A</p><ol><li>\u5728\u4E00\u4E2A\u51FD\u6570\u5185\u90E8</li><li>\u5728\u4E00\u4E2A\u4EE3\u7801\u5757\uFF08\u7531\u4E00\u5BF9\u82B1\u62EC\u53F7\u5305\u88F9\uFF09\u5185\u90E8</li></ol><p><strong>let/const \u58F0\u660E\u5E76\u4E0D\u4F1A\u88AB\u63D0\u5347\u5230\u5F53\u524D\u4EE3\u7801\u5757\u7684\u9876\u90E8</strong></p><p>\u4F7F\u7528\u5757\u7EA7\u4F5C\u7528\u57DF\u53EF\u4EE5\u5F88\u597D\u5730\u89E3\u51B3 for\u5FAA\u73AF\u7528var\u58F0\u660E\u53D8\u91CF\u7684\u95EE\u9898</p><h2 id="\u4F5C\u7528\u57DF\u94FE" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528\u57DF\u94FE" aria-hidden="true">#</a> \u4F5C\u7528\u57DF\u94FE</h2><blockquote><p>\u4F5C\u7528\u57DF\u94FE\u548C\u539F\u578B\u7EE7\u627F\u6709\u70B9\u7C7B\u4F3C\uFF0C\u4F46\u53C8\u6709\u70B9\u5C0F\u533A\u522B\uFF1A\u5982\u679C\u53BB\u67E5\u627E\u4E00\u4E2A\u666E\u901A\u5BF9\u8C61\u7684\u5C5E\u6027\u65F6\uFF0C\u5728\u5F53\u524D\u5BF9\u8C61\u548C\u5176\u539F\u578B\u4E2D\u90FD\u627E\u4E0D\u5230\u65F6\uFF0C\u4F1A\u8FD4\u56DEundefined\uFF1B\u4F46\u67E5\u627E\u7684\u5C5E\u6027\u5728\u4F5C\u7528\u57DF\u94FE\u4E2D\u4E0D\u5B58\u5728\u7684\u8BDD\u5C31\u4F1A\u629B\u51FAReferenceError\u3002</p></blockquote><p>\u9996\u5148\u8BA4\u8BC6\u4E00\u4E0B\u4EC0\u4E48\u53EB\u505A <strong>\u81EA\u7531\u53D8\u91CF</strong> \u3002\u5982\u4E0B\u4EE3\u7801\u4E2D\uFF0C<code>console.log(a)</code>\u8981\u5F97\u5230a\u53D8\u91CF\uFF0C\u4F46\u662F\u5728\u5F53\u524D\u7684\u4F5C\u7528\u57DF\u4E2D\u6CA1\u6709\u5B9A\u4E49a\uFF08\u53EF\u5BF9\u6BD4\u4E00\u4E0Bb\uFF09\u3002\u5F53\u524D\u4F5C\u7528\u57DF\u6CA1\u6709\u5B9A\u4E49\u7684\u53D8\u91CF\uFF0C\u8FD9\u6210\u4E3A \u81EA\u7531\u53D8\u91CF \u3002\u81EA\u7531\u53D8\u91CF\u7684\u503C\u5982\u4F55\u5F97\u5230 \u2014\u2014 \u5411\u7236\u7EA7\u4F5C\u7528\u57DF\u5BFB\u627E\u3002\u5982\u679C\u7236\u7EA7\u4E5F\u6CA1\u5462\uFF1F\u518D\u4E00\u5C42\u4E00\u5C42\u5411\u4E0A\u5BFB\u627E\uFF0C\u76F4\u5230\u627E\u5230\u5168\u5C40\u4F5C\u7528\u57DF\u8FD8\u662F\u6CA1\u627E\u5230\uFF0C\u5C31\u5BA3\u5E03\u653E\u5F03\u3002\u8FD9\u79CD\u4E00\u5C42\u4E00\u5C42\u7684\u5173\u7CFB\uFF0C\u5C31\u662F \u4F5C\u7528\u57DF\u94FE \u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// \u8FD9\u91CC\u7684a\u5728\u8FD9\u91CC\u5C31\u662F\u4E00\u4E2A\u81EA\u7531\u53D8\u91CF</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4F5C\u7528\u57DF\u94FE\u7684\u521B\u5EFA" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528\u57DF\u94FE\u7684\u521B\u5EFA" aria-hidden="true">#</a> \u4F5C\u7528\u57DF\u94FE\u7684\u521B\u5EFA</h2><p>\u51FD\u6570\u7684\u4F5C\u7528\u57DF\u5728\u51FD\u6570\u5B9A\u4E49\u7684\u65F6\u5019\u5C31\u51B3\u5B9A\u4E86\u3002</p><p>\u8FD9\u662F\u56E0\u4E3A\u51FD\u6570\u6709\u4E00\u4E2A\u5185\u90E8\u5C5E\u6027 [[scope]]\uFF0C<strong>\u5F53\u51FD\u6570\u521B\u5EFA\u7684\u65F6\u5019\uFF0C\u5C31\u4F1A\u4FDD\u5B58\u6240\u6709\u7236\u53D8\u91CF\u5BF9\u8C61\u5230\u5176\u4E2D\uFF0C\u53EF\u4EE5\u7406\u89E3\u4E3A [[scope]] \u5C31\u662F\u6240\u6709\u7236\u53D8\u91CF\u5BF9\u8C61\u7684\u5C42\u7EA7\u94FE\uFF0C\u4F46\u662F\u6CE8\u610F\uFF1A[[scope]] \u5E76\u4E0D\u4EE3\u8868\u5B8C\u6574\u7684\u4F5C\u7528\u57DF\u94FE\uFF01</strong></p><p>\u4E3E\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>function foo() {
    function bar() {
        ...
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u51FD\u6570\u521B\u5EFA\u65F6\uFF0C\u5404\u81EA\u7684[[scope]]\u4E3A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>foo.[[scope]] = [
  globalContext.VO
];

bar.[[scope]] = [
    fooContext.AO,
    globalContext.VO
];
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4F5C\u7528\u57DF\u4E0E\u6267\u884C\u4E0A\u4E0B\u6587" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528\u57DF\u4E0E\u6267\u884C\u4E0A\u4E0B\u6587" aria-hidden="true">#</a> \u4F5C\u7528\u57DF\u4E0E\u6267\u884C\u4E0A\u4E0B\u6587</h2><p>\u4F5C\u7528\u57DF\u662F\u5728\u58F0\u660E\u65F6\u5C31\u5DF2\u7ECF\u786E\u5B9A\u4E86\uFF0C\u4F46\u662F\u6267\u884C\u4E0A\u4E0B\u6587\u662F\u5728\u8FD0\u884C\u7684\u65F6\u5019\u624D\u80FD\u786E\u5B9A\u7684\u3002\u6BD4\u5982\u51FD\u6570\u58F0\u660E\u65F6\u5176\u4E2Dthis\u7684\u6307\u5411\u662F\u4E0D\u786E\u5B9A\u7684\uFF0C\u7531\u5B83\u6700\u7EC8\u7684\u8C03\u7528\u65F6\u73AF\u5883\u786E\u5B9A\u3002</p><p>\u6267\u884C\u4E0A\u4E0B\u6587\u662F\u51FD\u6570\u6267\u884C\u4E4B\u524D\u521B\u5EFA\u7684\u3002\u6267\u884C\u4E0A\u4E0B\u6587\u6700\u660E\u663E\u7684\u5C31\u662Fthis\u7684\u6307\u5411\u662F\u6267\u884C\u65F6\u786E\u5B9A\u7684\u3002\u800C\u4F5C\u7528\u57DF\u8BBF\u95EE\u7684\u53D8\u91CF\u662F\u7F16\u5199\u4EE3\u7801\u7684\u7ED3\u6784\u786E\u5B9A\u7684\u3002</p><blockquote><p>\u4F5C\u7528\u57DF\u548C\u6267\u884C\u4E0A\u4E0B\u6587\u4E4B\u95F4\u6700\u5927\u7684\u533A\u522B\u662F\uFF1A <strong>\u6267\u884C\u4E0A\u4E0B\u6587\u5728\u8FD0\u884C\u65F6\u786E\u5B9A\uFF0C\u968F\u65F6\u53EF\u80FD\u6539\u53D8\uFF1B\u4F5C\u7528\u57DF\u5728\u5B9A\u4E49\u65F6\u5C31\u786E\u5B9A\uFF0C\u5E76\u4E14\u4E0D\u4F1A\u6539\u53D8</strong>\u3002</p></blockquote><p><strong>\u603B\u7ED3\uFF1A</strong></p><p>\u5728js\u4EE3\u7801\u6267\u884C\u65F6\uFF0C\u9996\u5148\u4F1A\u521B\u5EFA\u6267\u884C\u4E0A\u4E0B\u6587\uFF0C\u7136\u540E\u9047\u5230\u53D8\u91CF\uFF0C\u51FD\u6570\uFF0C\u8FDB\u884C\u58F0\u660E\uFF0C\u6B64\u65F6\u4F1A\u8FDB\u884C\u4F5C\u7528\u57DF\u7684\u521B\u5EFA\u3002\u7136\u540E\u5F53\u51FD\u6570\u88AB\u8C03\u7528\u65F6\uFF08\u6B64\u65F6\u5C31\u662F\u5728\u8FD0\u884C\u65F6\uFF09\uFF0C\u6267\u884C\u4E0A\u4E0B\u6587\u624D\u88AB\u786E\u5B9A\uFF08\u6B64\u65F6\u5305\u62ECthis\u6307\u5411\u88AB\u786E\u5B9A\uFF09\u3002</p><h2 id="\u9759\u6001\u4F5C\u7528\u57DF\u4E0E\u52A8\u6001\u4F5C\u7528\u57DF" tabindex="-1"><a class="header-anchor" href="#\u9759\u6001\u4F5C\u7528\u57DF\u4E0E\u52A8\u6001\u4F5C\u7528\u57DF" aria-hidden="true">#</a> \u9759\u6001\u4F5C\u7528\u57DF\u4E0E\u52A8\u6001\u4F5C\u7528\u57DF</h2><p><strong>JavaScript \u91C7\u7528\u8BCD\u6CD5\u4F5C\u7528\u57DF(lexical scoping)\uFF0C\u4E5F\u5C31\u662F\u9759\u6001\u4F5C\u7528\u57DF\u3002</strong></p><p>JavaScript \u91C7\u7528\u7684\u662F\u8BCD\u6CD5\u4F5C\u7528\u57DF(\u9759\u6001\u4F5C\u7528\u57DF)\uFF0C\u51FD\u6570\u7684\u4F5C\u7528\u57DF\u5728\u51FD\u6570\u5B9A\u4E49\u7684\u65F6\u5019\u5C31\u51B3\u5B9A\u4E86\u3002</p><p>\u800C\u4E0E\u8BCD\u6CD5\u4F5C\u7528\u57DF\u76F8\u5BF9\u7684\u662F\u52A8\u6001\u4F5C\u7528\u57DF\uFF0C\u51FD\u6570\u7684\u4F5C\u7528\u57DF\u662F\u5728\u51FD\u6570\u8C03\u7528\u7684\u65F6\u5019\u624D\u51B3\u5B9A\u7684\u3002</p><p><strong>\u4E00\u4E2Ademo</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5047\u8BBE\u91C7\u7528\u9759\u6001\u4F5C\u7528\u57DF\uFF0C\u6267\u884C\u4EE3\u7801\uFF0C\u58F0\u660E\u4E86\u4E00\u4E2A\u53D8\u91CFvalue\uFF0C\u58F0\u660E\u4E86\u4E24\u4E2A\u51FD\u6570foo\u548Cbar\uFF0C\u7136\u540E\u6267\u884C\u51FD\u6570bar\u3002bar\u91CC\u9762\u58F0\u660E\u4E86\u4E00\u4E2A\u53D8\u91CFvalue\uFF0C\u7136\u540E\u6267\u884Cfoo\u51FD\u6570\uFF0Cfoo\u51FD\u6570\u91CC\u9762\u8981\u6C42\u6253\u5370value\uFF0C\u56E0\u4E3A\u91C7\u7528\u9759\u6001\u4F5C\u7528\u57DF\uFF0C\u5F53\u524D\u4F5C\u7528\u57DF\u4E2D\u6CA1\u6709value\uFF0C\u6240\u4EE5\u5411\u4E0A\u5C42\u4F5C\u7528\u57DF\u67E5\u627E\uFF0C\u67E5\u627E\u5230\u4E0A\u5C42\u4F5C\u7528\u57DF\u4E3A\u5168\u5C40\u4F5C\u7528\u57DF\uFF0C\u5168\u5C40\u4F5C\u7528\u57DF\u4E2D\u7684value\u4E3A1\uFF0C\u6700\u7EC8\u6253\u5370\u7ED3\u679C1\u3002</p><p>\u91C7\u7528\u52A8\u6001\u4F5C\u7528\u57DF\uFF0C\u6267\u884C foo \u51FD\u6570\uFF0C\u4F9D\u7136\u662F\u4ECE foo \u51FD\u6570\u5185\u90E8\u67E5\u627E\u662F\u5426\u6709\u5C40\u90E8\u53D8\u91CF value\u3002\u5982\u679C\u6CA1\u6709\uFF0C\u5C31\u4ECE\u8C03\u7528\u51FD\u6570\u7684\u4F5C\u7528\u57DF\uFF0C\u4E5F\u5C31\u662F bar \u51FD\u6570\u5185\u90E8\u67E5\u627E value \u53D8\u91CF\uFF0C\u6240\u4EE5\u7ED3\u679C\u4F1A\u6253\u5370 2\u3002</p><h2 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h2><blockquote><p>Like most modern programming languages, JavaScript uses lexical scoping. This means that functions are executed using the variable scope that was in effect when they were defined, not the variable scope that is in effect when they are invoked. In order to implement lexical scoping, the internal state of a JavaScript function object must in- clude not only the code of the function but also a reference to the current scope chain. (Before reading the rest of this section, you may want to review the material on variable scope and the scope chain in \xA73.10 and \xA73.10.3.) This combination of a function object and a scope (a set of variable bindings) in which the function\u2019s variables are resolved is called a closure in the computer science literature. (This is an old term that refers to the fact that the function\u2019s variables have bindings in the scope chain and that therefore the function is \u201Cclosed over\u201D its variables.)</p><p>Technically, all JavaScript functions are closures: they are objects, and they have a scope chain associated with them. Most functions are invoked using the same scope chain that was in effect when the function was defined, and it doesn\u2019t really matter that there is a closure involved. Closures become interesting when they are invoked under a different scope chain than the one that was in effect when they were defined. This happens most commonly when a nested function object is returned from the function within which it was defined. There are a number of powerful programming techniques that involve this kind of nested function closures, and their use has become relatively common in JavaScript programming. Closures may seem confusing when you first en- counter them, but it is important that you understand them well enough to use them comfortably.</p><p><em>JavaScript, The Definite Guide</em></p></blockquote><p>\u7FFB\u8BD1\u6210\u4E2D\u6587\u7684\u8BDD\u4E5F\u8BB8\u662F\u8FD9\u6837\uFF1A</p><p>\u548C\u5927\u591A\u6570\u7684\u73B0\u4EE3\u5316\u7F16\u7A0B\u8BED\u8A00\u4E00\u6837\uFF0C<code>JavaScript</code>\u662F\u91C7\u7528\u8BCD\u6CD5\u4F5C\u7528\u57DF\u7684\uFF0C\u8FD9\u5C31\u610F\u5473\u7740\u51FD\u6570\u7684\u6267\u884C\u4F9D\u8D56\u4E8E\u51FD\u6570\u5B9A\u4E49\u7684\u65F6\u5019\u6240\u4EA7\u751F\uFF08\u800C\u4E0D\u662F\u51FD\u6570\u8C03\u7528\u7684\u65F6\u5019\u4EA7\u751F\u7684\uFF09\u7684\u53D8\u91CF\u4F5C\u7528\u57DF\u3002\u4E3A\u4E86\u53BB\u5B9E\u73B0\u8FD9\u79CD\u8BCD\u6CD5\u4F5C\u7528\u57DF\uFF0C<code>JavaScript</code>\u51FD\u6570\u5BF9\u8C61\u7684\u5185\u90E8\u72B6\u6001\u4E0D\u4EC5\u5305\u542B\u51FD\u6570\u903B\u8F91\u7684\u4EE3\u7801\uFF0C\u9664\u6B64\u4E4B\u5916\u8FD8\u5305\u542B\u5F53\u524D\u4F5C\u7528\u57DF\u94FE\u7684\u5F15\u7528\u3002\u51FD\u6570\u5BF9\u8C61\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u4F5C\u7528\u57DF\u94FE\u76F8\u4E92\u5173\u8054\u8D77\u6765\uFF0C\u5982\u6B64\uFF0C\u51FD\u6570\u4F53\u5185\u90E8\u7684\u53D8\u91CF\u90FD\u53EF\u4EE5\u4FDD\u5B58\u5728\u51FD\u6570\u7684\u4F5C\u7528\u57DF\u5185\uFF0C\u8FD9\u5728\u8BA1\u7B97\u673A\u7684\u6587\u732E\u4E2D\u88AB\u79F0\u4E4B\u4E3A\u95ED\u5305\u3002</p><p>\u4ECE\u6280\u672F\u7684\u89D2\u5EA6\u53BB\u5C06\uFF0C\u6240\u6709\u7684<code>JavaScript</code>\u51FD\u6570\u90FD\u662F\u95ED\u5305\uFF1A\u4ED6\u4EEC\u90FD\u662F\u5BF9\u8C61\uFF0C\u4ED6\u4EEC\u90FD\u6709\u4E00\u4E2A\u5173\u8054\u5230\u4ED6\u4EEC\u7684\u4F5C\u7528\u57DF\u94FE\u3002\u7EDD\u5927\u591A\u6570\u51FD\u6570\u5728\u8C03\u7528\u7684\u65F6\u5019\u4F7F\u7528\u7684\u4F5C\u7528\u57DF\u94FE\u548C\u4ED6\u4EEC\u5728\u5B9A\u4E49\u7684\u65F6\u5019\u7684\u4F5C\u7528\u57DF\u94FE\u662F\u76F8\u540C\u7684\uFF0C\u4F46\u662F\u8FD9\u5E76\u4E0D\u5F71\u54CD\u95ED\u5305\u3002\u5F53\u8C03\u7528\u51FD\u6570\u7684\u65F6\u5019\u95ED\u5305\u6240\u6307\u5411\u7684\u4F5C\u7528\u57DF\u94FE\u548C\u5B9A\u4E49\u51FD\u6570\u65F6\u7684\u4F5C\u7528\u57DF\u94FE\u4E0D\u662F\u540C\u4E00\u4E2A\u4F5C\u7528\u57DF\u94FE\u7684\u65F6\u5019\uFF0C\u95ED\u5305become interesting\u3002\u8FD9\u79CDinteresting\u7684\u4E8B\u60C5\u5F80\u5F80\u53D1\u751F\u5728\u8FD9\u6837\u7684\u60C5\u51B5\u4E0B\uFF1A \u5F53\u4E00\u4E2A\u51FD\u6570\u5D4C\u5957\u4E86\u53E6\u5916\u7684\u4E00\u4E2A\u51FD\u6570\uFF0C\u5916\u90E8\u7684\u51FD\u6570\u5C06\u5185\u90E8\u5D4C\u5957\u7684\u8FD9\u4E2A\u51FD\u6570\u4F5C\u4E3A\u5BF9\u8C61\u8FD4\u56DE\u3002\u4E00\u5927\u6279\u5F3A\u5927\u7684\u7F16\u7A0B\u6280\u672F\u90FD\u5229\u7528\u4E86\u8FD9\u7C7B\u5D4C\u5957\u7684\u51FD\u6570\u95ED\u5305\uFF0C\u5F53\u7136\uFF0C<code>javascript</code>\u4E5F\u662F\u8FD9\u6837\u3002\u53EF\u80FD\u4F60\u7B2C\u4E00\u6B21\u78B0\u89C1\u95ED\u5305\u89C9\u5F97\u6BD4\u8F83\u96BE\u4EE5\u7406\u89E3\uFF0C\u4F46\u662F\u53BB\u660E\u767D\u95ED\u5305\u7136\u540E\u53BB\u975E\u5E38\u81EA\u5982\u7684\u4F7F\u7528\u5B83\u662F\u975E\u5E38\u91CD\u8981\u7684\u3002</p><p><strong>\u7528\u7AE5\u8BDD\u6545\u4E8B\u89E3\u91CA\u95ED\u5305</strong></p><p>\u5EFA\u8BAE\u770B\u4E00\u4E0B\uFF0C\u5F88\u6709\u610F\u601D\u{1F44D}\u{1F3FB}\u3002</p><blockquote><p><strong>Once upon a time:</strong></p><p>There was a princess...</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">princess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>She lived in a wonderful world full of adventures. She met her Prince Charming, rode around her world on a unicorn, battled dragons, encountered talking animals, and many other fantastical things.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">var</span> adventures <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">princeCharming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

    <span class="token keyword">var</span> unicorn <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        dragons <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token comment">/* ... */</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
        squirrel <span class="token operator">=</span> <span class="token string">&quot;Hello!&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">/* ... */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But she would always have to return back to her dull world of chores and grown-ups.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">return</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>And she would often tell them of her latest amazing adventure as a princess.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>        <span class="token function-variable function">story</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> adventures<span class="token punctuation">[</span>adventures<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>But all they would see is a little girl...</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> littleGirl <span class="token operator">=</span> <span class="token function">princess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>...telling stories about magic and fantasy.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>littleGirl<span class="token punctuation">.</span><span class="token function">story</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>And even though the grown-ups knew of real princesses, they would never believe in the unicorns or dragons because they could never see them. The grown-ups said that they only existed inside the little girl&#39;s imagination.</p><p>But we know the real truth; that the little girl with the princess inside...</p><p>...is really a princess with a little girl inside.</p><p><a href="https://stackoverflow.com/questions/111102/how-do-javascript-closures-work/6472397#6472397" target="_blank" rel="noopener noreferrer">\u539F\u6587\u94FE\u63A5</a></p></blockquote><p><strong>\u53C2\u8003\u6587\u7AE0</strong></p><p><a href="https://juejin.cn/post/6844903797135769614#heading-1" target="_blank" rel="noopener noreferrer">\u6DF1\u5165\u7406\u89E3JavaScript\u4F5C\u7528\u57DF\u548C\u4F5C\u7528\u57DF\u94FE</a></p><p><a href="https://github.com/rccoder/blog/issues/3" target="_blank" rel="noopener noreferrer">JavaScript\u4E4B\u95ED\u5305\u76F8\u5173</a></p><p><a href="https://github.com/mqyqingfeng/Blog/issues/6" target="_blank" rel="noopener noreferrer">JavaScript\u6DF1\u5165\u4E4B\u4F5C\u7528\u57DF\u94FE</a></p>`,58),i=[o];function p(c,r){return a(),s("div",null,i)}var u=n(t,[["render",p],["__file","\u4F5C\u7528\u57DF.html.vue"]]);export{u as default};
